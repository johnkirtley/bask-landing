---
interface Props {
  title?: string;
  description?: string;
  canonicalPath?: string;
  noindex?: boolean;
}

const {
  title = 'Bask - Vitamin D & Sun Tracker for iOS',
  description = 'Bask: Personalized vitamin D tracking with real-time UV monitoring. Get safe sun exposure recommendations based on your skin type, age, and location. Export reports for your doctor. iOS app with Apple Health sync.',
  canonicalPath = '',
  noindex = false,
} = Astro.props;

const siteUrl = Astro.site?.href || '';
const canonicalUrl = `${siteUrl.replace(/\/$/, '')}${canonicalPath}`;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="theme-color" content="#FFB347" />
    {noindex && <meta name="robots" content="noindex, nofollow" />}

    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="canonical" href={canonicalUrl} />

    <title>{title}</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@400..800&family=DM+Sans:wght@400..600&display=swap"
      rel="stylesheet"
    />

    <script
      type="application/ld+json"
      set:html={JSON.stringify({
        '@context': 'https://schema.org',
        '@type': 'MobileApplication',
        name: 'Bask',
        description: 'Bask is an iOS app that helps users track vitamin D from sun exposure and supplements. Using real-time UV data and personalized calculations based on skin type and age, Bask recommends safe sun exposure times and supplement doses. Built on Dr. Michael Holick\'s peer-reviewed photobiology research, Bask integrates with Apple Health and WeatherKit for seamless tracking.',
        applicationCategory: 'HealthApplication',
        operatingSystem: 'iOS',
        offers: {
          '@type': 'Offer',
          price: '0',
          priceCurrency: 'USD',
        },
      })}
    />

    <slot name="head" />
  </head>
  <body>
    <slot />
  </body>
</html>

<style is:global>
  @import 'tailwindcss';

  @custom-variant hover (&:hover);

  @theme inline {
    --color-background: hsl(var(--background));
    --color-foreground: hsl(var(--foreground));
    --color-card: hsl(var(--card));
    --color-card-foreground: hsl(var(--card-foreground));
    --color-popover: hsl(var(--popover));
    --color-popover-foreground: hsl(var(--popover-foreground));
    --color-primary: hsl(var(--primary));
    --color-primary-foreground: hsl(var(--primary-foreground));
    --color-secondary: hsl(var(--secondary));
    --color-secondary-foreground: hsl(var(--secondary-foreground));
    --color-muted: hsl(var(--muted));
    --color-muted-foreground: hsl(var(--muted-foreground));
    --color-accent: hsl(var(--accent));
    --color-accent-foreground: hsl(var(--accent-foreground));
    --color-destructive: hsl(var(--destructive));
    --color-destructive-foreground: hsl(var(--destructive-foreground));
    --color-border: hsl(var(--border));
    --color-input: hsl(var(--input));
    --color-ring: hsl(var(--ring));

    --radius-sm: 0.5rem;
    --radius-md: 0.75rem;
    --radius-lg: 1rem;
    --radius-xl: 1.5rem;

    --font-sans: 'DM Sans', sans-serif;
    --font-heading: 'Outfit', sans-serif;
  }

  :root {
    --background: 33 19% 93%;
    --foreground: 173 10% 19%;

    --primary: 35 100% 64%;
    --primary-foreground: 173 10% 19%;

    --secondary: 182 37% 76%;
    --secondary-foreground: 173 10% 19%;

    --card: 60 20% 97%;
    --card-foreground: 173 10% 19%;

    --popover: 60 20% 97%;
    --popover-foreground: 173 10% 19%;

    --muted: 33 19% 93%;
    --muted-foreground: 220 6% 46%;

    --accent: 35 100% 55%;
    --accent-foreground: 0 0% 100%;

    --destructive: 24 86% 51%;
    --destructive-foreground: 0 0% 100%;

    --border: 33 10% 88%;
    --input: 33 10% 88%;
    --ring: 35 100% 64%;

    --radius: 1rem;
  }

  @layer base {
    html {
      scroll-behavior: smooth;
    }

    * {
      @apply border-border;
    }

    body {
      @apply bg-background text-foreground font-sans antialiased;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      @apply font-heading font-semibold tracking-tight;
    }
  }

  button,
  a,
  nav,
  [role='button'],
  .no-select {
    @apply select-none;
  }

  [role='presentation'],
  .pointer-none,
  svg[aria-hidden='true'] {
    pointer-events: none;
  }

  .absolute.blur-3xl,
  [class*='blob'],
  [class*='pattern'] {
    @apply pointer-events-none;
  }

  svg:not([role='img']) {
    pointer-events: none;
  }

  section[id] {
    scroll-margin-top: 5rem;
  }

  .glass {
    background: rgba(255, 255, 255, 0.7);
    border: 1px solid rgba(0, 0, 0, 0.06);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  .grain {
    position: relative;
  }

  .grain::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
    opacity: 0.5;
  }
</style>
